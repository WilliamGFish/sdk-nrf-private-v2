CONFIG_ZTEST=y
# CONFIG_TEST=y
# CONFIG_NATIVE_POSIX=y
# CONFIG_POSIX_API=y

#
# Copyright (c) 2024 Manulytica Ltd
#
# SPDX-License-Identifier: Apache-2.0
#
# Kconfig project configuration for the DECT NR+ MAC Flow Ztest
#

# --- Base Ztest and Logging Configuration ---
CONFIG_ZTEST=y
CONFIG_ZTEST_NEW_API=y

# --- Enable the full DECT NR+ Stack ---
CONFIG_DECT_NRPLUS_STACK=y
CONFIG_DECT_MAC_LAYER=y
CONFIG_DECT_DLC_LAYER=y
CONFIG_DECT_CVG_LAYER=y

# --- Select the Device Role (CHOOSE ONE or BOTH) ---
# For an end-device application, enable the PT role.
CONFIG_DECT_MAC_ROLE_IS_PT=y
# For a gateway/base station application, comment out the line above and uncomment this one.
# CONFIG_DECT_MAC_ROLE_IS_FT=y

# --- Enable MAC Security for testing the secure handshake ---
CONFIG_TEST_RANDOM_GENERATOR=y

# Enable PSA Crypto API
CONFIG_MBEDTLS=y
CONFIG_MBEDTLS_PSA_CRYPTO_C=y
CONFIG_PSA_CRYPTO=y


# Enable MbedTLS as the PSA backend
CONFIG_MBEDTLS=y
CONFIG_MBEDTLS_ENABLE_HEAP=y  # Recommended for PSA Crypto
CONFIG_MBEDTLS_HEAP_SIZE=65536  # Adjust based on your needs

# Enable crypto algorithms required by dect_mac_security.c
CONFIG_PSA_WANT_AES=y
CONFIG_PSA_WANT_ALG_CTR=y
CONFIG_PSA_WANT_ALG_CMAC=y



# IMPORTANT: For production, this key MUST be provisioned securely.
CONFIG_DECT_MAC_MASTER_PSK_HEX="000102030405060708090A0B0C0D0E0F"

# Set the default log level for the application and the DECT stack modules.
# 3=Info, 4=Debug
CONFIG_DECT_APP_MAIN_LOG_LEVEL=3
CONFIG_DECT_NRPLUS_LOG_LEVEL=3
CONFIG_DECT_CVG_LOG_LEVEL=3
CONFIG_DECT_DLC_LOG_LEVEL=3
CONFIG_DECT_CDD_LOG_LEVEL=3
CONFIG_DECT_MAC_CORE_LOG_LEVEL=3
CONFIG_DECT_MAC_SM_PT_LOG_LEVEL=3
CONFIG_DECT_MAC_SM_FT_LOG_LEVEL=3
CONFIG_DECT_MAC_DATA_PATH_LOG_LEVEL=3
CONFIG_DECT_MAC_PDU_LOG_LEVEL=3
CONFIG_DECT_MAC_SECURITY_LOG_LEVEL=3


# ##############################################################################
##############################################################################

#=============================================================================
# Zephyr Kernel and System Configuration
#=============================================================================
# CONFIG_MAIN_STACK_SIZE=4096
# CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048

# Enable the full C standard library (newlib) for functions like strtol, etc.
# CONFIG_NEWLIB_LIBC=y
# CONFIG_CBPRINTF_FULL_INTEGRAL=y

# Enable Logging and Console Output
# CONFIG_LOG=y
# CONFIG_CONSOLE=y
# CONFIG_USE_SEGGER_RTT=y
# CONFIG_RTT_CONSOLE=y
# CONFIG_SERIAL=y
# CONFIG_PRINTK=y

#=============================================================================
# Networking Stack Configuration
#=============================================================================
# CONFIG_NETWORKING=y
# CONFIG_NET_L2_DECT_NRPLUS=y
# CONFIG_NET_L2_6LO_DECT_NRPLUS=y
# CONFIG_NET_IPV6=y
# CONFIG_NET_UDP=y

# Set a default IPv6 prefix. This will be used by the FT to build its CDD
# content and will be distributed to the PT.
CONFIG_NET_CONFIG_MY_IPV6_PREFIX="2001:db8:cafe::"

#================================e=============================================
# DECT NR+ Stack Configuration
#=============================================================================

# --- Enable the Core Stack Layers ---
CONFIG_DECT_NRPLUS_STACK=y
CONFIG_NET_L2_DECT_NRPLUS=y
CONFIG_DECT_MAC_LAYER=y
CONFIG_DECT_DLC_LAYER=y
CONFIG_DECT_CVG_LAYER=y

# --- Select the Device Role (CHOOSE ONE or BOTH) ---
# For an end-device application, enable the PT role.
CONFIG_DECT_MAC_ROLE_IS_PT=y
# For a gateway/base station application, comment out the line above and uncomment this one.
# CONFIG_DECT_MAC_ROLE_IS_FT=y



CONFIG_CRYPTO=y
CONFIG_MBEDTLS=y
# --- MAC Layer Security (Highly Recommended) ---
CONFIG_DECT_MAC_SECURITY_ENABLE=y
CONFIG_TEST_RANDOM_GENERATOR=y
# IMPORTANT: For production, this key MUST be provisioned securely.
# This Kconfig value is for development and testing only.
CONFIG_DECT_MAC_MASTER_PSK_HEX="000102030405060708090A0B0C0D0E0F"


# Set the default log level for the application and the DECT stack modules.
# 3=Info, 4=Debug
CONFIG_DECT_APP_MAIN_LOG_LEVEL=3
CONFIG_DECT_NRPLUS_LOG_LEVEL=3
CONFIG_DECT_CVG_LOG_LEVEL=3
CONFIG_DECT_DLC_LOG_LEVEL=3
CONFIG_DECT_CDD_LOG_LEVEL=3
CONFIG_DECT_MAC_CORE_LOG_LEVEL=3
CONFIG_DECT_MAC_SM_PT_LOG_LEVEL=3
CONFIG_DECT_MAC_SM_FT_LOG_LEVEL=3
CONFIG_DECT_MAC_DATA_PATH_LOG_LEVEL=3
CONFIG_DECT_MAC_PDU_LOG_LEVEL=3
CONFIG_DECT_MAC_SECURITY_LOG_LEVEL=3

